h1. Installation

Remember, the FORTRAN version of AmpFit is contained solely within the fortran/ directory, including any IDL rouintes for plotting results, which are in the fortran/idl/ directory.

h2. Downloading

bc. git clone git@github.com:dlg0/ampereFit.git

h2. Libraries

There are several libraries that the ampFit fortran library depends on. These are:

* "The GNU Scientific Library":http://www.gnu.org/software/gsl/
* "FGSL: A Fortran interface to the GNU Scientific Library":http://www.lrz.de/services/software/mathematik/gsl/fortran/
* "LAPACK":http://www.netlib.org/lapack/
* Blas, of which I suggest "GotoBLAS2":http://www.tacc.utexas.edu/tacc-projects/gotoblas2/
Note: building gotoblas2 on the AMPRE machine requires the TARGET=NEHALEM flag.
Note: the GotoBLAS2 libary is causing a segfault on the AMPRE machine. Not sure why yet.
* "LAPACK95":http://www.netlib.org/lapack95/
* "NetCDF":http://www.unidata.ucar.edu/software/netcdf/
* "RST SuperDarn Lib - for AACGM":http://superdarn.jhuapl.edu
Note: At present we link against the full RST lib, but in future (when the new AACGM lib is out) we will link against the stand alone AACGM lib.

You will need to install these and then modify the following lines of "Makefile":

bc. NETCDF_DIR = /opt/local
 NETCDF_MOD = /usr/lib64/gfortran/modules/
 F95_LAPACK_DIR = /home/davidg/lapack95/LAPACK95
 LAPACK_DIR = /home/davidg/lapack/lapack-3.3.1/lib
 BLAS_DIR = /usr/lib64
 GSL_DIR = /home/davidg/gsl
 FGSL_DIR = /home/davidg/fgsl
 AACGM_DIR:=/home/davidg/rst

h3. Library interdependancies (I'm happy to help set these up)

* LAPACK depends on BLAS (While any BLAS lib will do, I usually use GotoBLAS2 as it is the fastest. However, it did have some problems on the ampre.newcastle.edu.au machine so in that case we are using the system BLAS, i.e., that installed with yum.)
* F95 LAPACK depends on LAPACK (It's the Fortran 95 wrapper to the LAPACK routines.)
* FGSL depends on GSL (It's the Fortran wrapper to the GSL routines.)
* RST depends on a whole bunch of things that you will have to deal with using your package management system.

h2. Compiler

At present I have only compiled with gfortran. You will need to specify the location of your gfortran in @Makefile@ at the following locations (although at present F77 is not used):

bc. F90 = /opt/local/bin/gfortran-mp-4.4
F77 = /opt/local/bin/gfortran-mp-4.4

If you want to change to something other than gfortran further modifications will need to be made and you had best let me do it ;) 

h2. Building

Should be pretty straigh forward:

@make@
